window.whatInput=function(){"use strict";function e(){o(),i(event),v=!0,x=window.setTimeout(function(){v=!1},650)}function t(e){v||i(e)}function n(e){o(),i(e)}function o(){window.clearTimeout(x)}function i(e){var t=u(e),n=b[e.type];if("pointer"===n&&(n=a(e)),y!==n){var o=d(e),i=o.nodeName.toLowerCase(),c="input"===i?o.getAttribute("type"):null;!m.hasAttribute("data-whatinput-formtyping")&&y&&"keyboard"===n&&"tab"!==k[t]&&("textarea"===i||"select"===i||"input"===i&&h.indexOf(c)<0)||E.indexOf(t)>-1||r(n)}"keyboard"===n&&s(t)}function r(e){y=e,m.setAttribute("data-whatinput",y),-1===L.indexOf(y)&&L.push(y)}function u(e){return e.keyCode?e.keyCode:e.which}function d(e){return e.target||e.srcElement}function a(e){return"number"==typeof e.pointerType?M[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}function s(e){-1===f.indexOf(k[e])&&k[e]&&f.push(k[e])}function c(e){var t=u(e),n=f.indexOf(k[t]);-1!==n&&f.splice(n,1)}function p(){m=document.body,window.PointerEvent?(m.addEventListener("pointerdown",t),m.addEventListener("pointermove",t)):window.MSPointerEvent?(m.addEventListener("MSPointerDown",t),m.addEventListener("MSPointerMove",t)):(m.addEventListener("mousedown",t),m.addEventListener("mousemove",t),"ontouchstart"in window&&m.addEventListener("touchstart",e)),m.addEventListener(l,t),m.addEventListener("keydown",n),m.addEventListener("keyup",n),document.addEventListener("keyup",c)}function w(){return l="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var f=[],m,v=!1,y=null,h=["button","checkbox","file","image","radio","reset","submit"],l=w(),E=[16,17,18,91,93],b={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};b[w()]="mouse";var L=[],k={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},M={2:"touch",3:"touch",4:"mouse"},x;return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?p():document.addEventListener("DOMContentLoaded",p)),{ask:function(){return y},keys:function(){return f},types:function(){return L},set:r}}();